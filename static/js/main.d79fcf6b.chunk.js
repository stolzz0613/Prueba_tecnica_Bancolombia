(this.webpackJsonpprueba_tecnica_bancolombia=this.webpackJsonpprueba_tecnica_bancolombia||[]).push([[0],{17:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(7),r=c.n(a),i=(c(17),c(2)),l=c.n(i),o=c(4),d=c(3),j=c(0),u=function(e){var t=e.title;return Object(j.jsx)("nav",{children:Object(j.jsx)("div",{className:"nav-wrapper light-blue darken-2",children:Object(j.jsx)("a",{href:"#!",className:"brand-logo",children:t})})})},b=c(8),m=c(5),h=function(e){var t=e.search,c=e.setsearch,n=e.setrequest,a=e.setspinner,r=t.city,i=Object(s.useState)(!1),l=Object(d.a)(i,2),o=l[0],u=l[1];return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==r.trim()?(u(!1),a(!0),n(!0)):u(!0)},children:[o?Object(j.jsx)("p",{className:"error red darken-4",children:"All fields are required"}):null,Object(j.jsxs)("div",{className:"input-field col s12",children:[Object(j.jsx)("input",{type:"text",name:"city",id:"city",value:r,onChange:function(e){c(Object(m.a)(Object(m.a)({},t),{},Object(b.a)({},e.target.name,e.target.value)))}}),Object(j.jsx)("label",{htmlFor:"city",children:"City: "})]}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"submit",value:"Check the weather",className:"waves-effect waves-light btn-large btn-block green accent-4"})})]})},p=function(){var e=Object(o.a)(l.a.mark((function e(t){var c,s,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.lat,s=t.lon,"90d59b52f0d676557ad6edc22bbde499",n="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(c,"&lon=").concat(s,"&exclude=minutely,hourly,alerts&appid=").concat("90d59b52f0d676557ad6edc22bbde499"),e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=c(11),O=c.n(x),f=function(e){var t=e.forecastInfo,c=t.daily[0].dt,n=t.daily[t.daily.length-1].dt,a=Object(s.useState)({series:[],options:{chart:{height:350,type:"line",zoom:{enabled:!1}},markers:{size:[6,6,6]},theme:{palette:"palette4"},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Forecast for the next 5 days",align:"left"},tooltip:{custom:function(e){var t=e.series,c=(e.seriesIndex,e.dataPointIndex),s=e.w,n=t[1][c],a=t[0][c],r=t[2][c],i=s.config.series[0].data[c].description;return'<div class="card center" style="padding: 20px;"><img src ="'+s.config.series[0].data[c].urlIcon+'" alt = "icon"/><h6 class="center">'+i.toUpperCase()+'</h6><hr/><ul><li class="maxTemp"> <span><strong>Max temp: </strong>'+n+'&deg;C</span> </li><li class="averageTemp"> <span><strong>Average temp: </strong>'+a+'&deg;C</span></li><li class="minTemp"> <span><strong>Min temp: </strong>'+r+"&deg;C</span></li></ul></div>"}},xaxis:{type:"datetime",min:new Date(1e3*c).toLocaleDateString("en-US"),max:new Date(1e3*n).toLocaleDateString("en-US")}}}),r=Object(d.a)(a,2),i=r[0],l=r[1],o=Object(s.useCallback)((function(){var e=[],c=[],s=[],n=[];t.daily.forEach((function(t){var n=new Date(1e3*t.dt),a=t.temp.eve+t.temp.day+t.temp.night+t.temp.morn-1092.6;e.push({x:n.toLocaleDateString("en-US").toString(),y:(a/4).toFixed(2),description:t.weather[0].description,urlIcon:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png")}),c.push({x:n.toLocaleDateString("en-US").toString(),y:(t.temp.max-273.15).toFixed(2),description:t.weather[0].description,urlIcon:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png")}),s.push({x:n.toLocaleDateString("en-US").toString(),y:(t.temp.min-273.15).toFixed(2),description:t.weather[0].description,urlIcon:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png")})})),e=u(e).slice(0,5),c=u(c).slice(0,5),s=u(s).slice(0,5),n.push({name:"Average Temp",data:e},{name:"Max Temp",data:c},{name:"Min Temp",data:s}),l((function(e){return Object(m.a)(Object(m.a)({},e),{},{series:n})}))}),[t]);function u(e){var t=[],c={};for(var s in e)void 0===c[e[s].x]&&t.push(e[s]),c[e[s].x]=e[s];return t}return Object(s.useEffect)((function(){o()}),[o]),Object(j.jsx)(O.a,{options:i.options,series:i.series})},v=(c(24),c(12)),g=c.p+"static/media/amanecer.7b902eec.png",N=c.p+"static/media/luna.bb31cb56.png",w=function(e){var t=e.city,c=t.wind,n=t.main,a=t.coord,r=Object(s.useState)(!1),i=Object(d.a)(r,2),u=i[0],b=i[1],m=Object(s.useState)(!1),h=Object(d.a)(m,2),x=h[0],O=h[1],w=Object(s.useState)({current:{sunrise:"",sunset:""}}),k=Object(d.a)(w,2),y=k[0],S=k[1],C=function(e){var t=new Date(1e3*e);return t=t.toLocaleTimeString()};return Object(s.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=6;break}return e.next=3,p(a);case 3:t=e.sent,S(t),O(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u,a]),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return b(!0)},children:"Open modal"}),Object(j.jsxs)(v.a,{open:u,onClose:function(){return b(!1)},center:!0,children:[Object(j.jsx)("div",{className:"modalHeader",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("p",{className:"modalTitle col s12 m8",children:"Additional Information"}),Object(j.jsxs)("div",{className:"center col s6 m2",children:[Object(j.jsx)("img",{className:"icon",alt:"sunrise",src:g}),Object(j.jsx)("p",{children:C(y.current.sunrise)})]}),Object(j.jsxs)("div",{className:"center col s6 m2",children:[Object(j.jsx)("img",{className:"icon",alt:"sunset",src:N}),Object(j.jsx)("p",{children:C(y.current.sunset)})]})]})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col s12 m4",children:[Object(j.jsx)("h5",{className:"center",children:"Wind speed:"}),Object(j.jsxs)("h6",{className:"center",children:[c.speed," m/h"]})]}),Object(j.jsxs)("div",{className:"col s12 m4",children:[Object(j.jsx)("h5",{className:"center",children:"Humidity:"}),Object(j.jsxs)("h6",{className:"center",children:[n.humidity," %"]})]}),Object(j.jsxs)("div",{className:"col s12 m4",children:[Object(j.jsx)("h5",{className:"center",children:"Pressure:"}),Object(j.jsxs)("h6",{className:"center",children:[n.pressure," hPa"]})]})]}),Object(j.jsx)("hr",{}),x?Object(j.jsx)(f,{forecastInfo:y}):null]})]})},k=function(e){var t=e.city,c=t.name,s=t.weather,n=t.main,a="http://openweathermap.org/img/wn/".concat(s[0].icon,"@4x.png");return Object(j.jsx)("div",{className:"col s12",children:Object(j.jsx)("div",{className:"card-panel white",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("img",{className:"col",src:a,alt:"icon"}),Object(j.jsxs)("div",{className:"col s12 m6",children:[Object(j.jsx)("h2",{children:"Current weather for: "}),Object(j.jsx)("p",{className:"city-name",children:c})]})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col s12 m6 l3",children:[Object(j.jsx)("h5",{className:"center",children:s[0].main}),Object(j.jsx)("h6",{className:"center",children:s[0].description})]}),Object(j.jsxs)("div",{className:"col s12 m6 l3",children:[Object(j.jsx)("h5",{className:"center",children:"Current:"}),Object(j.jsxs)("h6",{className:"center",children:[(n.temp-273.15).toFixed(2)," \xb0C"]})]}),Object(j.jsxs)("div",{className:"col s12 m6 l3",children:[Object(j.jsx)("h5",{className:"center",children:"Max:"}),Object(j.jsxs)("h6",{className:"center",children:[(n.temp_max-273.15).toFixed(2)," \xb0C"]})]}),Object(j.jsxs)("div",{className:"col s12 m6 l3",children:[Object(j.jsx)("h5",{className:"center",children:"Min:"}),Object(j.jsxs)("h6",{className:"center",children:[(n.temp_min-273.15).toFixed(2)," \xb0C"]})]})]}),Object(j.jsx)("div",{className:"center-align s12",children:Object(j.jsx)(w,{city:t})})]})})})},y=function(e){var t=e.cities;return Object(j.jsx)("div",{className:"mt-5",children:t.map((function(e){return Object(j.jsx)(k,{city:e},e.id)}))})},S=(c(26),function(){return Object(j.jsxs)("div",{className:"sk-fading-circle",children:[Object(j.jsx)("div",{className:"sk-circle1 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle2 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle3 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle4 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle5 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle6 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle7 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle8 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle9 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle10 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle11 sk-circle"}),Object(j.jsx)("div",{className:"sk-circle12 sk-circle"})]})}),C=function(){var e=Object(o.a)(l.a.mark((function e(t,c){var s,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"3f3b5b21e99b42da9f7e0ecd21c9981e",s="https://api.opencagedata.com/geocode/v1/json?q=".concat(t,"&key=").concat("3f3b5b21e99b42da9f7e0ecd21c9981e"),e.next=4,fetch(s);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,r={},a.results.length>0?r=a.results[0]:(r=null,c("No se encontraron resultados")),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),D=function(){var e=Object(o.a)(l.a.mark((function e(t){var c,s,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},s=t.geometry,"90d59b52f0d676557ad6edc22bbde499",n="https://api.openweathermap.org/data/2.5/find?lat=".concat(s.lat,"&lon=").concat(s.lng,"&cnt=5&appid=").concat("90d59b52f0d676557ad6edc22bbde499"),e.next=6,fetch(n);case 6:return a=e.sent,e.next=9,a.json();case 9:return r=e.sent,c=Object(m.a)(Object(m.a)({},r),t),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var I=function(){var e=Object(s.useState)({city:""}),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),r=Object(d.a)(a,2),i=r[0],b=r[1],m=Object(s.useState)(!0),p=Object(d.a)(m,2),x=p[0],O=p[1],f=Object(s.useState)(!1),v=Object(d.a)(f,2),g=v[0],N=v[1],w=Object(s.useState)({}),k=Object(d.a)(w,2),I=k[0],F=k[1],T=Object(s.useState)(!0),L=Object(d.a)(T,2),M=L[0],E=L[1],U=Object(s.useState)(""),_=Object(d.a)(U,2),A=_[0],q=_[1];Object(s.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t,s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&(b(!0),window.navigator.geolocation.getCurrentPosition(P),O(!1)),!g){e.next=23;break}return b(!0),t=c.city,e.next=6,C(t,q);case 6:if(null===(s=e.sent)){e.next=17;break}return e.next=10,D(s);case 10:n=e.sent,N(!1),b(!1),F(n),E(!1),e.next=21;break;case 17:N(!1),b(!1),E(!0),q("No results found");case 21:e.next=24;break;case 23:setTimeout((function(){b(!1),q("Enter a city to start the search")}),5e3);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g,x,c]);var P=function(){var e=Object(o.a)(l.a.mark((function e(t){var c,s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.coords,s={geometry:{lat:c.latitude,lng:c.longitude}},e.next=4,D(s);case 4:n=e.sent,b(!1),F(n),E(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u,{title:"Weather App"}),Object(j.jsx)("div",{className:"contenedor-form",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(h,{search:c,setsearch:n,setrequest:N,setspinner:b})}),i?Object(j.jsx)(S,{}):Object(j.jsx)("div",{className:"row",children:M?Object(j.jsx)("p",{className:"error red darken-4",children:A}):Object(j.jsx)(y,{cities:I.list})})]})})]})};r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(I,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.d79fcf6b.chunk.js.map